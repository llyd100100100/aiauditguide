# AI Audit Reviewer - 프로젝트 파일 구조 및 시연 가이드

## 1. 프로젝트 개요 (Overview)
**AI-Audit-Reviewer**는 다양한 보안 감사 로그(Audit Log)를 분석하여 이상 징후를 탐지하는 **AI 기반 보안 솔루션**입니다.

---

## 2. 파일별 역할 및 상세 설명 (File Structure)

### 📄 `app.py` (메인 애플리케이션)
사용자가 만나는 **웹 인터페이스(UI)**이자, 파일 처리를 담당하는 **지능형 파서**입니다.

*   **역할**:
    *   **Universal Parsing**: 업로드된 파일의 확장자를 자동으로 인식하여 처리합니다.
        *   `CSV`/`Excel`: Pandas를 사용해 구조화된 데이터로 변환.
        *   `PDF`: pypdf를 사용해 텍스트 추출.
        *   `TXT`: Raw Text로 읽기.
    *   **동적 필터링**: 데이터의 컬럼을 분석하여 자동으로 필터 옵션(Dropdown)을 생성합니다.
    *   **AI 연동**: 사용자의 설정을 받아 AI에게 보낼 데이터를 준비합니다.

### 📄 `ai_utils.py` (AI 엔진)
Google Gemini AI와 통신하며, API의 한계를 극복하는 **지능형 통신 모듈**입니다.

*   **역할**:
    *   **재시도 로직(Retry)**: `tenacity` 라이브러리를 사용하여 API 한도 초과(429 Error) 시 **최대 7번, 60초까지** 점진적으로 대기하며 재시도합니다.
    *   **모델 관리**: 현재 가장 안정적인 `gemini-flash-latest` 모델을 사용하도록 설정되어 있습니다.
    *   **프롬프트 주입**: "당신은 보안 감사 전문가입니다"라는 페르소나를 AI에게 부여합니다.

### 📄 `security_utils.py` (보안 엔진)
데이터가 외부로 나가기 전에 개인정보를 차단하는 **필수 보안 방화벽**입니다.

*   **역할**:
    *   **PII Masking**: MS Presidio 엔진을 탑재하여 이름, 전화번호, 이메일, IP 주소 등을 감지합니다.
    *   **비식별화**: 감지된 정보를 `<PERSON>`, `<IP_ADDRESS>` 등의 태그로 치환하여 AI가 문맥은 이해하되 실제 개인정보는 볼 수 없게 만듭니다.

### 📁 `test_data_large/` (테스트 데이터)
시연을 위해 생성된 **20개의 다양한 대용량 로그 파일**입니다.
*   GMP 현장의 다양한 상황(HPLC, 생산, 실험실 등)을 가정하여 생성되었습니다.

---

## 3. 시연 시나리오 (Demo Flow)

1.  **파일 업로드**: `test_data_large` 폴더의 `mock_audit_log_*.pdf` 또는 `csv` 업로드.
2.  **보안 확인**: "Data Inspector" 탭에서 원본 데이터와 마스킹된 데이터 비교 (`<PERSON>` 태그 확인).
3.  **필터링**: 메인 화면의 자동 생성된 필터로 특정 부서나 로그만 필터링.
4.  **AI 분석**: "Analysis Settings" 슬라이더를 30~50으로 맞추고 "Run Full Security Audit" 클릭.
5.  **결과 확인**: AI가 분석한 보안 리포트 확인.
